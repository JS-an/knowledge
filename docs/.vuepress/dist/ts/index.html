<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>理解 Typescript 配置文件 | AllenBblog</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/page/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/page/assets/css/0.styles.08b46613.css" as="style"><link rel="preload" href="/page/assets/js/app.489ce719.js" as="script"><link rel="preload" href="/page/assets/js/2.2d8afebf.js" as="script"><link rel="preload" href="/page/assets/js/19.366ad9a6.js" as="script"><link rel="prefetch" href="/page/assets/js/10.54c97ea4.js"><link rel="prefetch" href="/page/assets/js/11.e39c66ee.js"><link rel="prefetch" href="/page/assets/js/12.b310eb07.js"><link rel="prefetch" href="/page/assets/js/13.6a8da236.js"><link rel="prefetch" href="/page/assets/js/14.25bcf0ce.js"><link rel="prefetch" href="/page/assets/js/15.98c9c612.js"><link rel="prefetch" href="/page/assets/js/16.feb274a9.js"><link rel="prefetch" href="/page/assets/js/17.041466f7.js"><link rel="prefetch" href="/page/assets/js/18.62426881.js"><link rel="prefetch" href="/page/assets/js/20.191ae040.js"><link rel="prefetch" href="/page/assets/js/21.8e1d7fda.js"><link rel="prefetch" href="/page/assets/js/22.f2bdd8e0.js"><link rel="prefetch" href="/page/assets/js/3.927d2cc3.js"><link rel="prefetch" href="/page/assets/js/4.8015288e.js"><link rel="prefetch" href="/page/assets/js/5.c44f34e2.js"><link rel="prefetch" href="/page/assets/js/6.e1b1c3f1.js"><link rel="prefetch" href="/page/assets/js/7.14b9824c.js"><link rel="prefetch" href="/page/assets/js/8.e7d5bfcd.js"><link rel="prefetch" href="/page/assets/js/9.1095ed4f.js">
    <link rel="stylesheet" href="/page/assets/css/0.styles.08b46613.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/page/" class="home-link router-link-active"><img src="/page/logo.png" alt="AllenBblog" class="logo"> <span class="site-name can-hide">AllenBblog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML/CSS/JS" class="dropdown-title"><span class="title">HTML/CSS/JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTML/CSS/JS" class="mobile-dropdown-title"><span class="title">HTML/CSS/JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/html/" class="nav-link">
  HTML/HTML5
</a></li><li class="dropdown-item"><!----> <a href="/page/css/" class="nav-link">
  CSS/CSS3
</a></li><li class="dropdown-item"><!----> <a href="/page/js/" class="nav-link">
  JS/ES
</a></li><li class="dropdown-item"><!----> <a href="/page/ts/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/page/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/page/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/page/wx/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/page/ui/" class="nav-link">
  UI框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络基础" class="dropdown-title"><span class="title">网络基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络基础" class="mobile-dropdown-title"><span class="title">网络基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/http/" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/page/mongoDB/" class="nav-link">
  mongoDB
</a></li><li class="dropdown-item"><!----> <a href="/page/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工具" class="dropdown-title"><span class="title">前端工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工具" class="mobile-dropdown-title"><span class="title">前端工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/page/npm/" class="nav-link">
  npm
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML/CSS/JS" class="dropdown-title"><span class="title">HTML/CSS/JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTML/CSS/JS" class="mobile-dropdown-title"><span class="title">HTML/CSS/JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/html/" class="nav-link">
  HTML/HTML5
</a></li><li class="dropdown-item"><!----> <a href="/page/css/" class="nav-link">
  CSS/CSS3
</a></li><li class="dropdown-item"><!----> <a href="/page/js/" class="nav-link">
  JS/ES
</a></li><li class="dropdown-item"><!----> <a href="/page/ts/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/page/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/page/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/page/wx/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/page/ui/" class="nav-link">
  UI框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络基础" class="dropdown-title"><span class="title">网络基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络基础" class="mobile-dropdown-title"><span class="title">网络基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/http/" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/page/mongoDB/" class="nav-link">
  mongoDB
</a></li><li class="dropdown-item"><!----> <a href="/page/nginx/" class="nav-link">
  nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工具" class="dropdown-title"><span class="title">前端工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工具" class="mobile-dropdown-title"><span class="title">前端工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/page/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/page/npm/" class="nav-link">
  npm
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/page/ts/" aria-current="page" class="active sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/page/ts/#理解-typescript-配置文件" class="sidebar-link">理解 Typescript 配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/page/ts/#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/page/ts/#使用示例" class="sidebar-link">使用示例</a></li><li class="sidebar-sub-header"><a href="/page/ts/#配置说明" class="sidebar-link">配置说明</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="理解-typescript-配置文件"><a href="#理解-typescript-配置文件" class="header-anchor">#</a> 理解 Typescript 配置文件</h2> <p>TS 使用 tsconfig.json 作为其配置文件，它主要包含两块内容：</p> <ol><li>指定待编译的文件</li> <li>定义编译选项</li></ol> <blockquote><p>另外，一般来说，tsconfig.json 文件所处的路径就是当前 TS 项目的根路径。</p></blockquote> <h3 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h3> <p>TS 的编译命令为 tsc ，当我们在命令行中直接输入 tsc 时，会打印出如下的使用说明：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ tsc
Version <span class="token number">2.7</span>.2
Syntax:   tsc <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>file <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
Examples: tsc hello.ts
          tsc --outFile file.js file.ts
          tsc @args.txt

Options:
-h, --help                                         Print this message.
--all                                              Show all compiler options.
-v, --version                                      Print the compiler's version.
<span class="token punctuation">..</span>.
</code></pre></div><p>如果仅仅是编译少量的文件，我们可以直接使用 tsc ，通过其选项来设置编译配置，如：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>tsc --outFile file.js --target es3 --module commonjs file.ts
</code></pre></div><p>但如果是编译整个项目的话，最推荐的做法是使用 tsconfig.json 文件，这样就不用每次编译时都还得手动敲配置，而且也便于团队协作。</p> <p>以下是让 tsc 使用 tsconfig.json 的两种方式：</p> <ol><li>不显式指定 tsconfig.json ，此时，编译器会从当前路径开始寻找 tsconfig.json 文件，如果没有找到，则继续往上级路径逐步寻找，直到找到为止</li> <li>通过 --project （或缩写 -p ）指定一个包含 tsconfig.json 的路径，或者包含配置信息的 .json 文件路径</li></ol> <blockquote><p>注意，tsc 的命令行选项具有优先级，会覆盖 tsconfig.json 中的同名选项。</p></blockquote> <h3 id="使用示例"><a href="#使用示例" class="header-anchor">#</a> 使用示例</h3> <p>下面是一个简单的配置示例：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;removeComments&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;preserveConstEnums&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;foo.ts&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中，compilerOptions 用来配置编译选项，files 用来指定待编译文件。
这里的待编译文件是指入口文件，任何被入口文件依赖的文件，比如 foo.ts 依赖 bar.ts ，那这里并不需要写上 bar.ts ，编译器会自动把所有的依赖文件纳为编译对象。</p> <p>也可以使用 include 和 exclude 来指定和排除待编译文件：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;removeComments&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;preserveConstEnums&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src/**/*&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;**/*.spec.ts&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>所以，总结一下，指定待编译文件有两种方式：</p> <ol><li>使用 files 属性</li> <li>使用 include 和 exclude 属性</li></ol> <blockquote><p>开发者可以按照自己的喜好使用其中任意一种。但它们不是互斥的，在某些情况下两者搭配起来使用效果更佳。</p></blockquote> <h3 id="配置说明"><a href="#配置说明" class="header-anchor">#</a> 配置说明</h3> <h4 id="文件指定"><a href="#文件指定" class="header-anchor">#</a> 文件指定</h4> <ul><li><p>files 属性是一个数组，数组元素可以是相对文件路径和绝对文件路径。</p></li> <li><p>include 和 exclude 属性也是一个数组，但数组元素是类似 glob 的文件模式。它支持的 glob 通配符包括：</p></li></ul> <blockquote><p>* ：匹配 0 或多个字符（注意：不含路径分隔符）
? ：匹配任意单个字符（注意：不含路径分隔符）
**/ ：递归匹配任何子路径</p></blockquote> <ul><li>在继续说明之前，有必要先了解下在编译器眼里什么样的文件才算是 TS 文件。</li></ul> <ol><li><p>TS 文件指拓展名为 .ts、.tsx 或 .d.ts 的文件。如果开启了 allowJs 选项，那 .js 和 .jsx 文件也属于 TS 文件。</p></li> <li><p>如果仅仅包含一个 * 或者 .* ，那么只有TS 文件才会被包含。</p></li> <li><p>如果 files 和 include 都未设置，那么除了 exclude 排除的文件，编译器会默认包含路径下的所有 TS 文件。</p></li> <li><p>如果同时设置 files 和 include ，那么编译器会把两者指定的文件都引入。</p></li> <li><p>如果未设置 exclude ，那其默认值为 node_modules 、bower_components、jspm_packages 和编译选项 outDir 指定的路径。</p></li> <li><p>exclude 只对 include 有效，对 files 无效。即 files 指定的文件如果同时被 exclude 排除，那么该文件仍然会被编译器引入。</p></li></ol> <ul><li><p>前面提到，任何被 files 或 include 引入的文件的依赖会被自动引入。
反过来，如果 B.ts 被 A.ts 依赖，那么 B.ts 不能被 exclude 排除，除非 A.ts 也被排除了。</p></li> <li><p>有一点要注意的是，编译器不会引入疑似为输出的文件。比如，如果引入的文件中包含 index.ts ，那么 index.d.ts 和 index.js 就会被排除。通常来说，只有拓展名不一样的文件命名法是不推荐的。</p></li> <li><p>tsconfig.json 也可以为空文件，这种情况下会使用默认的编译选项来编译所有默认引入的文件。</p></li></ul> <h4 id="编译选项"><a href="#编译选项" class="header-anchor">#</a> 编译选项</h4> <h5 id="常用选项"><a href="#常用选项" class="header-anchor">#</a> 常用选项</h5> <table><thead><tr><th>选项字段</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>allowJs</td> <td>boolean</td> <td>false</td> <td>允许编译 JS 文件</td></tr> <tr><td>checkJs</td> <td>boolean</td> <td>false</td> <td>报告 JS 文件中存在的类型错误需要配合 allowJs 使用</td></tr> <tr><td>declaration</td> <td>boolean</td> <td>false	生成对应的 .d.ts 文件</td> <td></td></tr> <tr><td>declarationDir</td> <td>string</td> <td>-</td> <td>生成的 .d.ts 文件存放路径默认与 .ts 文件相同</td></tr> <tr><td>experimentalDecorators</td> <td>boolean</td> <td>false</td> <td>启用实验功能-ES 装饰器</td></tr> <tr><td>jsx</td> <td>string</td> <td>Preserve</td> <td>在 .tsx 中支持 JSX ：React 或 Preserve ，详细说明</td></tr> <tr><td>jsxFactory</td> <td>string</td> <td>React.createElement</td> <td>jsx 设置为 React 时使用的创建函数</td></tr> <tr><td>lib</td> <td>string[]</td> <td>-</td> <td>编译时引入的 ES 功能库，包括：es5 、es6、es7、dom 等。如果未设置，则默认为： target 为 es5 时: [&quot;dom&quot;, &quot;es5&quot;, &quot;scripthost&quot;] target 为 es6 时: [&quot;dom&quot;, &quot;es6&quot;, &quot;dom.iterable&quot;, &quot;scripthost&quot;]</td></tr> <tr><td>module</td> <td>string</td> <td>target === &quot;es3&quot; or &quot;es5&quot; ?&quot;commonjs&quot; : &quot;es6&quot;</td> <td>生成的模块形式：none、commonjs、amd、system、umd、es6、es2015 或 esnext 只有 amd 和 system 能和 outFile 一起使用 target 为 es5 或更低时可用 es6 和 es2015</td></tr> <tr><td>moduleResolution</td> <td>string</td> <td>module === &quot;amd&quot; or &quot;system&quot; or &quot;es6&quot; ? &quot;classic&quot; : &quot;node&quot;</td> <td>模块解析方式，详细说明</td></tr> <tr><td>noImplicitAny</td> <td>boolean</td> <td>false</td> <td>存在隐式 any 时抛错</td></tr> <tr><td>noImplicitReturns</td> <td>boolean</td> <td>false</td> <td>不存在 return 时抛错</td></tr> <tr><td>noImplicitThis</td> <td>boolean</td> <td>false</td> <td>this 可能为 any 时抛错</td></tr> <tr><td>outDir</td> <td>string</td> <td>-</td> <td>编译生成的文件存放路径默认与 .ts 文件相同</td></tr> <tr><td>sourceMap</td> <td>boolean</td> <td>false</td> <td>生成 .map 文件</td></tr> <tr><td>target</td> <td>string</td> <td>es3</td> <td>生成 .js 文件版本</td></tr></tbody></table> <p>附：<a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener noreferrer">官方完整的编译选项列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="类型相关"><a href="#类型相关" class="header-anchor">#</a> 类型相关</h4> <ul><li>类型相关的选项包括 typeRoots 和 types 。</li></ul> <p>有一个普遍的误解，以为这两个选项适用于所有的类型声明文件，包括用户自定义的声明文件。其实不然。
这两个选项只对通过 npm 安装的声明模块有效，用户自定义的类型声明文件与它们没有任何关系。</p> <p>声明模块通常会包含一个 index.d.ts 文件，或者其 package.json 设置了 types 字段。</p> <p>默认的，所有位于 node_modules/@types 路径下的模块都会引入到编译器。
具体来说是，./node_modules/@types 、../node_modules/@types、../../node_modules/@types 等等。</p> <ul><li>typeRoots 用来指定默认的类型声明文件查找路径，默认为 node_modules/@types 。比如:</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;typeRoots&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./typings&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的配置会自动引入 ./typings 下的所有 TS 类型声明模块，而不是 ./node_modules/@types 下的模块。</p> <ul><li>如果不希望自动引入 typeRoots 指定路径下的所有声明模块，那可以使用 types 指定自动引入哪些模块。比如：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;types&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;express&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只会引入 node 、 lodash 和 express 三个声明模块，其它的声明模块则不会被自动引入。
如果 types 被设置为 [] ，那么将不会自动引入任何声明模块。此时，如果想使用声明模块，只能在代码中手动引入了。</p> <blockquote><p>请记住，自动引入只对包含全局声明的模块有效。比如 jQuery ，我们不用手动 import 或者 ///<reference></reference> 即可在任何文件中使用 $ 的类型。再比如，对于 import 'foo' ，编译器会分别在 node_modules 和 node_modules/@types 文件下查找 foo 模块和声明模块。</p></blockquote> <p>基于此，如果想让自定义声明的类型不需要手动引入就可以在任何地方使用，可以将其声明为全局声明 global ，然后让 files 或者 include 包含即可。</p> <p>比如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">graphql</span><span class="token operator">:</span> <span class="token punctuation">(</span>query<span class="token operator">:</span> TemplateStringsArray<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">namespace</span> Gatsby <span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token class-name">ComponentProps</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">children</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">,</span>
      data<span class="token operator">:</span> RootQueryType
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样的话，就可以在任何地方直接使用 graphql 和 Gatsby 对应的类型了。</p> <h4 id="配置复用"><a href="#配置复用" class="header-anchor">#</a> 配置复用</h4> <p>可以使用 extends 来实现配置复用，即一个配置文件可以继承另一个文件的配置属性。</p> <p>比如，建立一个基础的配置文件 configs/base.json ：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strictNullChecks&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后，tsconfig.json 就可以引用这个文件的配置了：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./configs/base&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;main.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;supplemental.ts&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种继承有两种特点：</p> <ol><li>继承者中的同名配置会覆盖被继承者</li> <li>所有相对路径都被解析为其所在文件的路径</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/page/assets/js/app.489ce719.js" defer></script><script src="/page/assets/js/2.2d8afebf.js" defer></script><script src="/page/assets/js/19.366ad9a6.js" defer></script>
  </body>
</html>
